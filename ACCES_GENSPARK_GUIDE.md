# ğŸ¯ Guide d'AccÃ¨s Ã  Genspark AI Analysis

## ğŸ“‹ Table des MatiÃ¨res
1. [MÃ©thodes d'AccÃ¨s](#mÃ©thodes-daccÃ¨s)
2. [VÃ©rification des Droits](#vÃ©rification-des-droits)
3. [CrÃ©er un Compte Superviseur](#crÃ©er-un-compte-superviseur)
4. [DÃ©pannage](#dÃ©pannage)

---

## ğŸšª MÃ©thodes d'AccÃ¨s

### **MÃ©thode 1: Via le Menu (RECOMMANDÃ‰E)**

**Ã‰tapes dÃ©taillÃ©es:**

1. **Connexion**
   ```
   1. Ouvrez votre navigateur
   2. Allez sur: https://votre-domaine.com
   3. Cliquez sur "Connexion" ou "Se connecter"
   4. Entrez vos identifiants (email + mot de passe)
   5. Cliquez sur "Se connecter"
   ```

2. **Navigation vers Genspark**
   ```
   1. Regardez en haut Ã  droite de la page
   2. Vous verrez votre avatar (photo ou initiales)
   3. Cliquez sur cet avatar
   4. Un menu dÃ©roulant s'ouvre
   5. Cherchez "ğŸ§  Genspark AI Analysis"
   6. Cliquez dessus
   ```

**Visuel du menu:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PCCI Help Desk         [ğŸ‘¤ JD] â–¼      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ John Doe                          â”‚ â”‚
â”‚  â”‚ john.doe@pcci.com                 â”‚ â”‚
â”‚  â”‚ supervisor                        â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ ğŸ‘¤ Profil                         â”‚ â”‚
â”‚  â”‚ âš™ï¸  Gestion des Utilisateurs      â”‚ â”‚
â”‚  â”‚ ğŸ“Š Analyse statistique            â”‚ â”‚
â”‚  â”‚ ğŸ§  Genspark AI Analysis  â† CLIC  â”‚ â”‚
â”‚  â”‚ ğŸ“ Logs d'Audit                   â”‚ â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚ â”‚
â”‚  â”‚ ğŸšª DÃ©connexion                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### **MÃ©thode 2: URL Directe**

**Ã‰tapes:**

1. **Connectez-vous d'abord** Ã  l'application
2. **Copiez cette URL** (en remplaÃ§ant par votre domaine):
   ```
   https://votre-domaine.com/admin/genspark
   ```
3. **Collez dans la barre d'adresse**
4. **Appuyez sur EntrÃ©e**

**Exemples d'URL:**
```
Localhost (dÃ©veloppement):
http://localhost:3000/admin/genspark

Production:
https://pcci-helpdesk.com/admin/genspark
https://helpdesk.votre-entreprise.com/admin/genspark
```

---

### **MÃ©thode 3: Ajout d'un Bouton sur le Dashboard**

**Cette mÃ©thode n'est pas encore implÃ©mentÃ©e, mais voici comment la crÃ©er:**

Si vous voulez un accÃ¨s encore plus rapide depuis le Dashboard, je peux ajouter un bouton.

**Voulez-vous que j'ajoute ce bouton?** Cela ressemblerait Ã :

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ Nouveau  â”‚  â”‚ Tickets  â”‚  â”‚ ğŸ§  AI    â”‚â”‚
â”‚  â”‚ Ticket   â”‚  â”‚ RÃ©cents  â”‚  â”‚ Analysis â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” VÃ©rification des Droits

### **Qui Peut AccÃ©der?**

Seuls les utilisateurs avec les rÃ´les suivants peuvent accÃ©der:
- âœ… **Admin** (Administrateur)
- âœ… **Supervisor** (Superviseur)
- âŒ **User** (Utilisateur normal) - PAS D'ACCÃˆS

### **Comment VÃ©rifier Votre RÃ´le?**

#### **MÃ©thode Visuelle (Simple)**

1. **Connectez-vous**
2. **Cliquez sur votre avatar** (coin supÃ©rieur droit)
3. **Dans le menu, regardez sous votre email**
4. **Vous verrez votre rÃ´le** Ã©crit en petit
   ```
   John Doe
   john.doe@pcci.com
   supervisor  â† Voici votre rÃ´le
   ```

#### **MÃ©thode Base de DonnÃ©es (Technique)**

Si vous avez accÃ¨s Ã  Supabase:

1. **Ouvrez Supabase Dashboard**
   - URL: https://app.supabase.com
   - Connectez-vous

2. **SÃ©lectionnez votre projet**
   - "pcci-support-hero" ou votre nom de projet

3. **Allez dans "Table Editor"** (menu gauche)

4. **Ouvrez la table "user_roles"**

5. **Cherchez votre ligne**
   - Colonne `user_id`: Votre ID utilisateur
   - Colonne `role`: Doit Ãªtre `supervisor` ou `admin`

**Capture d'Ã©cran de la table:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ user_id                      â”‚ role       â”‚ created_at â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ abc123...                    â”‚ admin      â”‚ 2024-10-01 â”‚
â”‚ def456...                    â”‚ supervisor â”‚ 2024-10-05 â”‚
â”‚ ghi789...                    â”‚ user       â”‚ 2024-10-10 â”‚ â† Pas d'accÃ¨s
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ‘¤ CrÃ©er un Compte Superviseur

### **Cas 1: Vous ÃŠtes Administrateur**

**Via l'Interface Web:**

1. **Connectez-vous** comme admin
2. **Allez dans "Gestion des Utilisateurs"**
   - Avatar â†’ "Gestion des Utilisateurs"
3. **Trouvez l'utilisateur** que vous voulez promouvoir
4. **Cliquez sur "Modifier"** ou l'icÃ´ne âœï¸
5. **Changez le rÃ´le** de "user" Ã  "supervisor"
6. **Enregistrez**

**Via Supabase:**

1. **Ouvrez Supabase Dashboard**
2. **Table Editor â†’ user_roles**
3. **Trouvez l'utilisateur** (ou ajoutez une nouvelle ligne)
4. **Modifiez la colonne "role"**:
   - Changez de `user` Ã  `supervisor`
5. **Cliquez sur "Save"**

---

### **Cas 2: CrÃ©er un Nouveau Compte Superviseur**

#### **Ã‰tape 1: CrÃ©er le Compte**

1. **Allez sur la page d'inscription**
   ```
   https://votre-domaine.com/auth
   ```

2. **Remplissez le formulaire:**
   - Nom complet: `Test Superviseur`
   - Email: `superviseur@pcci.com`
   - Mot de passe: `SuperviseurTest123!`
   - PCCI ID: `PCCI-TEST-001`
   - DÃ©partement: `IT`
   - TÃ©lÃ©phone: `+225 01 02 03 04 05`

3. **Cliquez sur "S'inscrire"**

#### **Ã‰tape 2: Promouvoir en Superviseur**

**Via Supabase:**

1. **Ouvrez Supabase Dashboard**
2. **Table Editor â†’ profiles**
3. **Trouvez le nouveau compte** (cherchez par email)
4. **Copiez son `id`** (c'est l'UUID, exemple: `abc123-def456-...`)

5. **Allez dans la table "user_roles"**
6. **Cliquez sur "Insert" â†’ "Insert row"**
7. **Remplissez:**
   ```
   user_id: [collez l'ID copiÃ©]
   role: supervisor
   ```
8. **Cliquez sur "Save"**

#### **Ã‰tape 3: Tester**

1. **DÃ©connectez-vous**
2. **Reconnectez-vous** avec le compte superviseur
   - Email: `superviseur@pcci.com`
   - Mot de passe: `SuperviseurTest123!`
3. **Cliquez sur votre avatar**
4. **VÃ©rifiez que "Genspark AI Analysis" apparaÃ®t**
5. **Cliquez dessus** pour tester

---

### **Cas 3: Script SQL Rapide (AvancÃ©)**

Si vous avez accÃ¨s Ã  SQL Editor dans Supabase:

```sql
-- 1. CrÃ©er un nouveau profil (optionnel, si compte existe dÃ©jÃ )
-- Remplacez les valeurs par les vÃ´tres

-- 2. Ajouter le rÃ´le superviseur
INSERT INTO user_roles (user_id, role)
VALUES (
  'VOTRE_USER_ID_ICI',  -- Remplacez par l'ID de l'utilisateur
  'supervisor'
)
ON CONFLICT (user_id) 
DO UPDATE SET role = 'supervisor';

-- 3. VÃ©rifier
SELECT 
  p.full_name,
  p.email,
  ur.role
FROM profiles p
LEFT JOIN user_roles ur ON p.id = ur.user_id
WHERE p.email = 'votre-email@pcci.com';
```

---

## ğŸ”§ DÃ©pannage

### **ProblÃ¨me 1: "AccÃ¨s RefusÃ©"**

**SymptÃ´me:**
```
âŒ Message d'erreur: "AccÃ¨s refusÃ© - Droits superviseur ou admin requis"
âŒ Redirection vers /dashboard
```

**Solutions:**

1. **VÃ©rifiez votre rÃ´le**
   - Avatar â†’ Regardez sous votre email
   - Doit afficher "supervisor" ou "admin"

2. **Si rÃ´le = "user"**
   - Contactez un administrateur
   - Demandez une promotion Ã  "supervisor"

3. **Si vous Ãªtes admin**
   - VÃ©rifiez la table `user_roles` dans Supabase
   - Assurez-vous que votre ID a bien le rÃ´le "admin"

---

### **ProblÃ¨me 2: Menu "Genspark AI Analysis" Invisible**

**SymptÃ´me:**
```
âŒ L'option n'apparaÃ®t pas dans le menu dÃ©roulant
```

**Solutions:**

1. **Actualisez la page** (F5 ou Ctrl+R)

2. **DÃ©connectez-vous et reconnectez-vous**
   - Avatar â†’ DÃ©connexion
   - Reconnectez-vous

3. **Videz le cache du navigateur**
   ```
   Chrome/Edge: Ctrl + Shift + Delete
   Firefox: Ctrl + Shift + Delete
   Safari: Cmd + Option + E
   ```

4. **VÃ©rifiez que le code est Ã  jour**
   - Si vous Ãªtes sur serveur Ubuntu, faites la mise Ã  jour:
   ```bash
   cd ~/pcci-helpdesk
   git pull origin main
   npm install
   npm run build
   pm2 restart pcci-helpdesk
   ```

---

### **ProblÃ¨me 3: Erreur 404 sur /admin/genspark**

**SymptÃ´me:**
```
âŒ Page introuvable
âŒ URL: https://votre-domaine.com/admin/genspark
```

**Solutions:**

1. **VÃ©rifiez que le code est dÃ©ployÃ©**
   ```bash
   # Sur votre serveur Ubuntu
   cd ~/pcci-helpdesk
   git log --oneline -5
   
   # Vous devez voir ce commit:
   # ca76f3a feat: Ajouter l'intÃ©gration Genspark AI Analysis
   ```

2. **Si le commit n'est pas lÃ , mettez Ã  jour:**
   ```bash
   git pull origin main
   npm install
   npm run build
   pm2 restart pcci-helpdesk
   ```

3. **VÃ©rifiez les logs d'erreur**
   ```bash
   pm2 logs pcci-helpdesk --err
   ```

---

### **ProblÃ¨me 4: Page Blanche ou Chargement Infini**

**SymptÃ´me:**
```
âŒ Page blanche
âŒ Ou roue de chargement qui tourne indÃ©finiment
```

**Solutions:**

1. **Ouvrez la Console du Navigateur**
   ```
   Windows/Linux: F12
   Mac: Cmd + Option + I
   ```

2. **Allez dans l'onglet "Console"**
   - Cherchez les erreurs en rouge

3. **Erreurs courantes:**
   ```
   TypeError: Cannot read property...
   â†’ Rechargez la page (F5)
   
   Network Error: Failed to fetch
   â†’ VÃ©rifiez votre connexion internet
   â†’ VÃ©rifiez que le serveur backend fonctionne
   
   403 Forbidden
   â†’ VÃ©rifiez vos droits d'accÃ¨s (voir ProblÃ¨me 1)
   ```

4. **Rechargez en vidant le cache**
   ```
   Windows/Linux: Ctrl + Shift + R
   Mac: Cmd + Shift + R
   ```

---

### **ProblÃ¨me 5: "Aucun Ticket Ã  Analyser"**

**SymptÃ´me:**
```
â„¹ï¸ Message: "Aucun ticket Ã  analyser"
â„¹ï¸ Le bouton "Lancer l'analyse" est grisÃ©
```

**Solutions:**

1. **VÃ©rifiez qu'il existe des tickets**
   - Allez sur "Tickets" dans le menu
   - CrÃ©ez au moins un ticket de test

2. **CrÃ©er un ticket de test:**
   ```
   1. Cliquez sur "Nouveau Ticket"
   2. Remplissez:
      - Titre: "Test connexion rÃ©seau"
      - Description: "Impossible de se connecter au wifi"
      - PrioritÃ©: Haute
   3. Enregistrez
   ```

3. **Retournez sur Genspark**
   - Cliquez sur "Actualiser"
   - Le bouton devrait maintenant Ãªtre actif

---

## ğŸ“ Support SupplÃ©mentaire

### **Besoin d'Aide?**

Si aucune de ces solutions ne fonctionne:

1. **Collectez ces informations:**
   ```
   - Votre rÃ´le: [user / supervisor / admin]
   - Message d'erreur exact: [copier-coller]
   - URL actuelle: [copier depuis la barre d'adresse]
   - Navigateur: [Chrome / Firefox / Safari / Edge]
   - Ã‰tapes effectuÃ©es: [liste ce que vous avez essayÃ©]
   ```

2. **CrÃ©ez un rapport de dÃ©bogage:**
   ```bash
   # Sur votre serveur Ubuntu
   cd ~/pcci-helpdesk
   
   cat > ~/genspark-debug.txt << 'EOF'
   ========================================
   GENSPARK DEBUG REPORT
   ========================================
   
   Date: $(date)
   Commit actuel: $(git log -1 --oneline)
   Status PM2: $(pm2 status)
   
   Derniers logs (20 lignes):
   $(pm2 logs pcci-helpdesk --lines 20 --nostream)
   
   Fichiers Genspark:
   $(ls -la src/pages/GensarkAnalysis.tsx)
   $(ls -la src/types/genspark.ts)
   $(ls -la src/utils/genspark-analyzer.ts)
   ========================================
   EOF
   
   cat ~/genspark-debug.txt
   ```

3. **Envoyez ce rapport** Ã  votre Ã©quipe de support

---

## ğŸ‰ RÃ©capitulatif Rapide

### **Pour AccÃ©der Ã  Genspark:**

```
1. âœ… Avoir un compte Superviseur ou Admin
2. âœ… Se connecter Ã  l'application
3. âœ… Cliquer sur Avatar â†’ "ğŸ§  Genspark AI Analysis"
4. âœ… OU aller directement sur /admin/genspark
```

### **Si ProblÃ¨me:**

```
1. VÃ©rifiez votre rÃ´le (doit Ãªtre supervisor ou admin)
2. Actualisez la page (F5)
3. Videz le cache (Ctrl + Shift + Delete)
4. VÃ©rifiez que le code est Ã  jour (git pull)
5. Consultez ce guide de dÃ©pannage
```

---

**Bonne utilisation! ğŸš€**

Si vous avez d'autres questions, n'hÃ©sitez pas Ã  demander!
